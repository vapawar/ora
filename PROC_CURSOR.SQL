CREATE OR REPLACE PROCEDURE GET_DATA_DEPARMENTS_ASGN(DEPTNUM NUMBER)
AS
DNUMBER NUMBER(8);
DNAME   VARCHAR2(20);
ERROR_MESSAGE VARCHAR2(200);
CURSOR DEPT_CURSOR(DEPTNO NUMBER) IS SELECT * FROM DEPARMENTS_ASGN WHERE DEPT_NO=DEPTNO;
CURSOR EMP_CURSOR(EMPDN NUMBER) IS SELECT * FROM EMPLOYEE_ASGN WHERE DEPT_NO=EMPDN;
BEGIN
OPEN DEPT_CURSOR(DEPTNUM);
FETCH DEPT_CURSOR INTO DNUMBER,DNAME;
FOR DT IN EMP_CURSOR(DEPTNUM) LOOP
DBMS_OUTPUT.PUT_LINE(DT.EMP_ID ||'  '|| RPAD(DT.EMP_NAME,20) || RPAD(DT.EMAIL,20) || RPAD(DT.EMP_JOB,20) || RPAD(DT.HIRE_DATE,15) || RPAD(DT.SALARY,10)|| DNUMBER|| '    ' || DNAME);
END LOOP;
EXCEPTION
WHEN NO_DATA_NEEDED THEN
DBMS_OUTPUT.PUT_LINE('No data found');
WHEN OTHERS THEN
DBMS_OUTPUT.PUT_LINE('Error Occurred.');
END;

Begin
GET_DATA_DEPARMENTS_ASGN(80);
end;
